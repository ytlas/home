#!/bin/bash

## Functions
# Make dd format more conventional.
function dd(){ sudo dd bs=4M if=$PWD/${1} of=${2}; }

function um(){ udiskie-mount /dev/${@}; }

function uu(){ udiskie-umount /dev/${@}; }

function edit(){
	if exists emacs && test -e /tmp/emacs1000/server; then
		emacsclient ${@}
	elif exists emacs; then
		emacs -nw -q ${@}
	elif exists nano; then
		nano ${@}
	else
		echo "Didn't find an editor, exiting."
		return 0
	fi

	return 1
}

function sedit(){
	if exists emacs && test -e /tmp/emacs1000/server; then
		EDITOR=emacsclient sudoedit ${@}
	elif exists emacs; then
		EDITOR="emacs -nw -q" sudoedit ${@}
	elif exists nano; then
		EDITOR=nano sudoedit ${@}
	else
		echo "Didn't find an editor, exiting."
		return 0
	fi

	return 1
}

function poweroff() {
	read -p "Are you sure you want to shutdown the machine? " -n 1 -r
	if [[ ! $REPLY =~ ^[Yy]$ ]]; then
		return 1
	fi

	sudo poweroff
}

function reboot(){
	read -p "Are you sure you want to reboot the machine? " -n 1 -r
	echo    # (optional) move to a new line
	if [[ ! $REPLY =~ ^[Yy]$ ]]; then
		return 1
	fi

	sudo reboot
}

exists () {
  type "$1" >/dev/null 2>/dev/null
}
